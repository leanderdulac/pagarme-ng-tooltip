"use strict";!function(){function tooltipCore($document,$timeout){function postLink($scope,$element,attrs,ctrl){function show($evt,data){showing=!0,data.html?textNode.html(data.content):textNode.text(data.content),$element.addClass(showingClass),data.hideTiming&&($timeout.cancel(timeout),timeout=$timeout(hide,data.hideTiming))}function hide(){$timeout.cancel(timeout),$element.removeClass(showingClass),$element.on("transitionend",transitionend)}function mousemove(evt){var _x=evt.pageX||evt.clientX,_y=evt.pageY||evt.clientY;showing&&moveTooltip(_x,_y)}function transitionend(){showing||(showing=!1,$element.removeAttr("style"))}function moveTooltip(x,y){var _top,_left,_width=$element.prop("offsetWidth"),_height=$element.prop("offsetHeight"),_widthAdjust=_width/2,_heightAdjust=10;_top=_heightAdjust+_height+y<=window.innerHeight?y+_height:y-_height,_left=_widthAdjust+x>=window.innerWidth?x-_width:0>=x-_widthAdjust?x:x-_widthAdjust,$element.css({top:_top+"px",left:_left+"px"})}function destroy(){$document.off("mousemove",mousemove),$show(),$hide()}var timeout,showing=!1,showingClass="showing",textNode=$element;$scope.showingClass&&(showingClass=$scope.showingClass),$scope.textNode&&$timeout(function(){textNode=angular.element($element[0].querySelector($scope.textNode))});var $show=$scope.$on("pg-tooltip-show",show),$hide=$scope.$on("pg-tooltip-hide",hide);$scope.$on("$destroy",destroy),$document.on("mousemove",mousemove)}var directive={scope:{showingClass:"@",textNode:"@"},restrict:"AEC",link:postLink};return directive}function tooltipTrigger($rootScope,$timeout){function postLink($scope,$element,attrs){function showTrigger(){$timeout(function(){$rootScope.$broadcast("pg-tooltip-show",{content:$scope.text,html:$scope.html,hideTiming:$scope.hideTimeout})},$scope.showDelay)}function hideTrigger(){$timeout(function(){$rootScope.$broadcast("pg-tooltip-hide")},$scope.hideDelay)}function destroy(){$element.off("mouseenter mouseleave")}$scope.showDelay=$scope.showDelay?parseInt($scope.showDelay):0,$scope.hideDelay=$scope.hideDelay?parseInt($scope.hideDelay):0,$scope.hideTimeout=$scope.hideTimeout?parseInt($scope.hideTimeout):!1,$element.on("mouseenter",showTrigger),$element.on("mouseleave",hideTrigger),$scope.$on("$destroy",destroy)}var directive={scope:{text:"@tooltipText",hideTimeout:"@",showDelay:"@",hideDelay:"@",html:"@"},restrict:"AEC",link:postLink};return directive}angular.module("pg-ng-tooltip",[]).directive("pgNgTooltip",tooltipCore).directive("tooltipTrigger",tooltipTrigger),tooltipCore.$inject=["$document","$timeout"],tooltipTrigger.$inject=["$rootScope","$timeout"]}();